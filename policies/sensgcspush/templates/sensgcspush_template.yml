name: $SENSGCSPUSH_POLICY_NAME
version: "0.3"

# Access control:
#   - only the data owner (CREATOR) can read or update the session
#   - even the data owner cannot read the session secrets (i.e., the volume key and tag)

access_policy:
  read:
   - CREATOR
  update:
   - CREATOR

services:
  - name: sensgcspush
    image_name: sensgcspush_image    
    command: ["/opt/sensoriant/gcs/push/bin/sensGcsPush", "-b", "$PUSH_BUCKET_NAME", "-i", "$PUSH_INPUT_PATH", "-p", "$PUSH_OBJECT_PREFIX"]
    mrenclaves: ["$MRENCLAVE_SENSGCSPUSH"]
    environment:
            SENSORIANT_STORAGE_CREDS: $PUSH_STORAGE_CREDENTIALS
            SENSORIANT_STORAGE_PROVIDER: $PUSH_STORAGE_PROVIDER
images:
  - name: sensgcspush_image    

security:
  attestation:
    tolerate: [debug-mode, software-hardening-needed]
    ignore_advisories: ["INTEL-SA-00334"]
    trusted_scone_qe_pubkeys: ["$PLATFORM_EDDSA_KEY"]

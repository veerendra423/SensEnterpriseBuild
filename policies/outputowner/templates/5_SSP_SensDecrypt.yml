name: $SENSDECRYPT_POLICY_NAME
version: "0.3"

# Access control:
#   - only output owner (CREATOR) can read and update the session
#   - nobody can read the session secrets or delete this session

access_policy:
  read:
   - CREATOR
  update:
   - CREATOR

# SensDecrypt service iterates over all query results generated by the algorithm and outputs the data

services:
   - name: SensDecrypt
     image_name: sensdecrypt_image
     command: /copy_files -i /decrypt-input -o /decrypt-output
#     mrenclaves: ["$MRENCLAVE_SENSDECRYPT"]
     pwd: /
     
images:
   - name: sensdecrypt_image
     volumes:
        - name: decrypt_input_volume
          path: /decrypt-input 
          update_policy: no_rollback_protection

security:
  attestation:
    mode: none

volumes:
  - name: decrypt_input_volume
    fspf_key: $SENSDECRYPT_FSPF_KEY
    export:
      - to:
          session: $ALGORITHM_POLICY_NAME
        update_policy: no_rollback_protection


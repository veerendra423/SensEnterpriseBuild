name: $OUTPUT_POLICY_NAME
version: "0.2"

# Access control:
#   - only output owner (CREATOR) can read and update the session
#   - nobody can read the session secrets or delete this session

access_policy:
  read:
   - CREATOR
  update:
   - CREATOR

# Output service iterates over all query results generated by the algorithm and outputs the data

services:
   - name: output
     image_name: output_image
     command: /output -i /encrypted-output
     mrenclaves: ["$MRENCLAVE_OUTPUT"]
     pwd: /
     
images:
   - name: output_image
     volumes:
        - name: encrypted_output_volume
          path: /encrypted-output 

volumes:
  # No fspf key and tag: an encrypted volume will be automatically generated
  # on the first run
  - name: encrypted_output_volume
    export: $ALGORITHM_POLICY_NAME

